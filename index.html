<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Roldão Pastel</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>Roldão Pastel</h1>
  <p>Cardápio</p>
</header>

<nav id="menu-categorias">
  <a href="#pastel_salgado">Salgados</a>
  <a href="#pastel_especial">Especiais</a>
  <a href="#pastel_doce">Doces</a>
  <a href="#bebida">Bebidas</a>
</nav>

<main>
  <section class="tipos">
    <h2 id="pastel_salgado">PASTÉIS SALGADOS</h2>
    <div id="salgados"></div>

    <h2 id="pastel_especial">PASTÉIS ESPECIAIS</h2>
    <div id="especiais"></div>

    <h2 id="pastel_doce">PASTÉIS DOCES</h2>
    <div id="doces"></div>

    <h2 id="bebida">BEBIDAS</h2>
    <div id="bebidas"></div>
  </section>
</main>

<footer>
  <div class="carrinho-info">
    <span>Total: R$ <span id="valor-total">0,00</span></span>
    <button id="btn-finalizar">Ver Carrinho</button>
  </div>
</footer>

<div id="popup-carrinho">
  <div class="popup-conteudo">
    <h2>Seu Pedido</h2>
    <div id="lista-carrinho"></div>
    <div id="valor-total-popup">Total: R$ 0,00</div>
    <div class="popup-buttons">
      <button id="btn-fechar">Fechar</button>
      <button id="btn-enviar">Enviar Pedido</button>
    </div>
  </div>
</div>

<script>
const catalogo = {
  salgados: [
    { nome: 'Frango', preco: 13, descricao: 'Frango desfiado com temperos especiais.' },
    { nome: 'Carne e Queijo', preco: 13, descricao: 'Carne moída com queijo derretido.' },
    { nome: 'Carne e Catupiry', preco: 13 },
    { nome: 'Frango e Queijo', preco: 14 },
    { nome: 'Frango e Catupiry', preco: 14 },
    { nome: 'Frango c/ Palmito', preco: 16 },
    { nome: 'Bauru', preco: 13, descricao: 'Presunto, queijo e tomate.' },
    { nome: 'Pizza', preco: 13, descricao: 'Queijo, tomate e orégano.' },
    { nome: 'Queijo', preco: 12 },
    { nome: 'Queijo e Catupiry', preco: 13 },
    { nome: 'Palmito', preco: 15 },
    { nome: 'Palmito com Queijo', preco: 16 },
    { nome: 'Palmito com Catupiry', preco: 16 },
    { nome: 'Cigarrete', preco: 9 },
    { nome: 'Baianhio', preco: 12, descricao: 'Calabresa apimentada, cebola e tomate.' },
    { nome: 'Baianhio Queijo', preco: 13, descricao: 'Calabresa apimentada, cebola, tomate e queijo.' },
    { nome: 'Baianhio Catupiry', preco: 13, descricao: 'Calabresa apimentada, cebola, tomate e catupiry.' },
    { nome: 'Calabresa', preco: 12, descricao: 'Calabresa, cebola, tomate e orégano.' },
    { nome: 'Calabresa Queijo', preco: 13, descricao: 'Calabresa, cebola, tomate, orégano e queijo.' },
    { nome: 'Calabresa Catupiry', preco: 13, descricao: 'Calabresa, cebola, tomate, orégano e catupiry.' },
    { nome: 'Creme de Milho', preco: 12 },
    { nome: 'Co-Có-Ri-Có', preco: 16, descricao: 'Creme de milho, frango e ovo cozido.' },
    { nome: 'Napolitano', preco: 14, descricao: 'Queijo, bacon e alho.' },
    { nome: 'Hambúrguer', preco: 14, descricao: 'Hambúrguer, queijo e bacon.' },
    { nome: 'Quatro Queijo', preco: 16, descricao: 'Mussarela, queijo prato, provolone e catupiry.' },
    { nome: 'Português', preco: 16, descricao: 'Palmito, ervilha, milho, ovo, presunto e queijo, cebola, tomate e azeitona.' }
  ],
  especiais: [
    { nome: 'Especial da Casa', preco: 18, descricao: 'Pastel especial recheado.' },
    { nome: 'Mega Frango', preco: 20, descricao: 'Frango, catupiry, milho e bacon.' }
  ],
  doces: [
    { nome: 'Romeu e Julieta', preco: 12, descricao: 'Goiabada com queijo.' },
    { nome: 'Chocolate com Morango', preco: 14 }
  ],
  bebidas: [
    { nome: 'Refrigerante Lata', preco: 6 },
    { nome: 'Água Mineral', preco: 3 }
  ]
};

const carrinho = [];

function criarProduto(item) {
  const div = document.createElement('div');
  div.className = 'produtos';
  div.innerHTML = `
    <div class="info-produto">
      <h4>${item.nome}</h4>
      <div class="preco-controles">
        <h6>R$ ${item.preco.toFixed(2)}</h6>
        <div class="controle-quantidade">
          <button class="diminuir">-</button>
          <span class="quantidade">0</span>
          <button class="aumentar">+</button>
        </div>
      </div>
    </div>
    ${item.descricao ? `<p class="descricao">${item.descricao}</p>` : ''}
  `;

  const aumentar = div.querySelector('.aumentar');
  const diminuir = div.querySelector('.diminuir');
  const quantidade = div.querySelector('.quantidade');

  aumentar.addEventListener('click', () => {
    adicionarAoCarrinho(item);
    quantidade.innerText = contarItem(item.nome);
  });

  diminuir.addEventListener('click', () => {
    removerDoCarrinho(item);
    quantidade.innerText = contarItem(item.nome);
  });

  return div;
}

function adicionarAoCarrinho(produto) {
  const existente = carrinho.find(p => p.nome === produto.nome);
  if (existente) {
    existente.quantidade++;
  } else {
    carrinho.push({ ...produto, quantidade: 1 });
  }
  atualizarTotal();
}

function removerDoCarrinho(produto) {
  const existente = carrinho.find(p => p.nome === produto.nome);
  if (existente) {
    existente.quantidade--;
    if (existente.quantidade <= 0) {
      const index = carrinho.indexOf(existente);
      carrinho.splice(index, 1);
    }
  }
  atualizarTotal();
}

function contarItem(nome) {
  const item = carrinho.find(p => p.nome === nome);
  return item ? item.quantidade : 0;
}

function atualizarTotal() {
  const total = carrinho.reduce((soma, p) => soma + (p.preco * p.quantidade), 0);
  document.getElementById('valor-total').innerText = total.toFixed(2);
  document.getElementById('valor-total-popup').innerText = `Total: R$ ${total.toFixed(2)}`;
}

function carregarProdutos() {
  Object.keys(catalogo).forEach(categoria => {
    const container = document.getElementById(categoria);
    catalogo[categoria].forEach(produto => {
      container.appendChild(criarProduto(produto));
    });
  });
}

carregarProdutos();

const btnFinalizar = document.getElementById('btn-finalizar');
const popup = document.getElementById('popup-carrinho');
const btnFechar = document.getElementById('btn-fechar');
const listaCarrinho = document.getElementById('lista-carrinho');
const btnEnviar = document.getElementById('btn-enviar');

btnFinalizar.addEventListener('click', () => {
  listaCarrinho.innerHTML = '';
  carrinho.forEach(item => {
    const div = document.createElement('div');
    div.className = 'item-carrinho';
    div.innerHTML = `
      <span>${item.nome} - R$${item.preco.toFixed(2)}</span>
      <span>x${item.quantidade}</span>
    `;
    listaCarrinho.appendChild(div);
  });
  popup.style.display = 'flex';
});

btnFechar.addEventListener('click', () => {
  popup.style.display = 'none';
});

btnEnviar.addEventListener('click', () => {
  const mensagem = carrinho.map(p => `${p.quantidade}x ${p.nome}`).join('\n') + `\nTotal: R$ ${carrinho.reduce((s, p) => s + p.preco * p.quantidade, 0).toFixed(2)}`;
  const url = `https://wa.me/5599999999999?text=${encodeURIComponent(mensagem)}`;
  window.open(url, '_blank');
});
</script>

</body>
</html>
